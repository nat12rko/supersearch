<!DOCTYPE html>

<html>
<head>
    <title>SuperSearch</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="js/frameworks/jquery.js"></script>
    <script src="js/frameworks/jquery.query-object.js"></script>

    <script type="text/javascript" src="js/frameworks/jquery.tipsy.js"></script>

    <link rel="stylesheet" href="css/frameworks/bootstrap.min.css">
    <!-- Optional theme -->
    <link rel="stylesheet" href="css/frameworks/bootstrap-theme.min.css">

    <script src="js/frameworks/bootstrap.min.js"></script>

    <script src="js/frameworks/knockout.js"></script>
    <script src="js/frameworks/knockout-mapping.js"></script>
    <script src="js/frameworks/knockout-bootstrap.min.js"></script>


    <script type="text/javascript" src="js/frameworks/bootstrap-select.js"></script>

    <link href="css/frameworks/bootstrap-select.css" rel="stylesheet"/>

    <script type="text/javascript" src="js/frameworks/bootstrap-datepicker.js"></script>

    <script type="text/javascript" src="js/frameworks/d3.js"></script>

    <script src="js/locales/bootstrap-datepicker.sv.js" charset="UTF-8"></script>

    <script src="js/frameworks/bootstrap-paginator.min.js" charset="UTF-8"></script>

    <script src="js/application/facets.js" charset="UTF-8"></script>


    <link href="css/frameworks/datepicker3.css" rel="stylesheet"/>

    <link href="css/application/page.css" rel="stylesheet"/>

    <script>
        $(function(){
            $("#includedPaymentModal").load("modals/paymentModal.html", function() {
                ko.applyBindings(specLineModel, document.getElementById('paymentModal'));
            });
        });
        $(function(){
            $("#includedFraudModal").load("modals/fraudModal.html", function() {
                ko.applyBindings(fraudAnalysisModel, document.getElementById('fraudModal'));
            });
        });
    </script>


</head>
<body>

<!-- Modals -->
<div id="includedPaymentModal"></div>
<div id="includedFraudModal"></div>

<style>

    .node {
        cursor: pointer;
    }

    .node:hover {
        stroke: #000;
        stroke-width: 1.5px;
    }

    .node--root {
        stroke: #777;
        stroke-width: 0px;
    }

    .node--leaf {
        fill: white;
    }

    .graph-label {
        pointer-events: none;
        font: 11px "Helvetica Neue", Helvetica, Arial, sans-serif;
        text-anchor: middle;
        text-shadow: 0 2px 0 #fff, 2px 0 0 #fff, -2px 0 0 #fff, 0 -2px 0 #fff;
    }

    .graph-label,
    .node--root,
    .node--leaf {
        /*pointer-events: none;*/
    }

    .list-group-item-facets {
        border: 0px solid #FFFFFF;
        padding: 5px 0px;
    }

    .list-group-facets {
        font-size: 10px;
        box-shadow: 0 0px 0px rgba(0, 0, 0, 0);
    }

    .badge-facets {
        font-size: 7px;
    }

</style>


<div class="container">
    <div class="page-header hidden-xs">
        SuperSök
    </div>

    <div class="col-md-9 col-sm-12" id="test">

        <form id="searchform" data-bind="submit:search">
            <div class="row">
                <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
                    <div class="input-group input-group-sm">
                        <span class="input-group-addon glyphicon glyphicon-zoom-in"></span>
                        <input id="searchinput" type="text" class="form-control" placeholder="Sök test" size="150"
                               data-bind='value:searchString, valueUpdate: "afterkeydown"'/> <br/>
                    </div>
                </div>
            </div>
            <br/>
            <div class="row hidden-xs">
                <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12">
                    <div class="input-daterange input-group  input-group-sm" id="datepicker">
                        <span class="input-group-addon   glyphicon glyphicon-calendar"></span>

                        <input type="text" class="input-sm form-control" name="start" data-bind="value: fromDate"/>
                        <span class="input-group-addon">to</span>
                        <input type="text" class="input-sm form-control" name="end" data-bind="value: toDate"/>
                    </div>
                </div>
                <div class="col-lg-3 col-md-3 col-sm-4  col-xs-12">
                    <div class="input-daterange input-group  input-group-sm">

                        <span class="input-group-addon glyphicon glyphicon-flag"></span>

                        <select data-width="250px"
                                data-bind="selectPicker: countryCodes, optionsText: 'text', optionsValue : 'id', selectPickerOptions: { optionsArray: availableCountries }"
                                size="4"
                                multiple="true"></select>
                    </div>

                </div>
                <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12">
                    <div class="input-daterange input-group  input-group-sm">
                        <span class="input-group-addon   glyphicon glyphicon-hdd"></span>

                        <select class="selectpicker" data-width="250px"
                                data-bind="selectPicker: systems, optionsText: 'text', optionsValue : 'id', selectPickerOptions: { optionsArray: availableSystems }"
                                size="4" multiple="true"></select>
                    </div>
                </div>
            </div>

            <br/>

            <div class="row">
                <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12" data-bind="foreach: filters">
                <span class="label label-success" data-bind="click: $parent.removeFilter">
                    <span data-bind="text: $data.field"></span>:<span data-bind="text: $data.value"></span></span>
                </div>
            </div>
            <br/>

            <br/>

            <div class="row">
                <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
                    <button type="submit" class="btn btn-default btn-sm">Search</button>
                </div>
            </div>
        </form>
        <br/>

        <div class="row" id="searchtable">
            <div class="col-lg-3 hidden-md hidden-xs hidden-sm">

                <ul class="list-group list-group-facets" id="facets">

                </ul>


            </div>

            <div class="col-lg-9 col-xs-12">
                <div class="row hidden-xs">
                    <div class="col-xs-0 col-md-8 col-md-offset-2">
                        <ul id='paginatortop'></ul>
                    </div>

                </div>
                <div class="row">
                    <table class="table table-hover table-condensed table-responsive">
                        <thead>
                        <th>System</th>
                        <th>Id</th>
                        <th colspan="10">Innehåll</th>
                        </thead>
                        <tbody data-bind="foreach: { data: hits, as: 'hit', afterAdd: colorFadeIn }">
                        <tr>
                            <td data-bind="text: type"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="row hidden-xs">
                    <div class="col-md-8 col-md-offset-2">
                        <ul id='paginatorbuttom'></ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3 hidden-xs hidden-sm" id="widgets">
        <div class="panel panel-info col-sm-12">
            Antal träffar: <span data-bind="text: amountHits"></span>
            Antal sidor: <span data-bind="text: amountPages"></span>
            Sök tid: <span data-bind="text: searchTime">ms</span>
        </div>

        <div class="col-sm-12" id="aggs"></div>
        <div class="col-sm-12">
            <ul class="list-group" data-bind="foreach: searchQueries">
                <li class="list-group-item" data-bind="click: $parent.loadThis"/>
                <span data-bind="text: $data.searchDate"> </span>

                <span data-bind="text: $data.searchString"> </span>
                </li>
            </ul>
        </div>


    </div>
</div>

<script type="text/javascript" src="js/application/views.js"></script>
<script type='text/javascript' src="js/application/paginator.js"></script>
<script type="text/javascript" src="js/application/aggregation_visualizer.js">
</script>

</body>
</html>